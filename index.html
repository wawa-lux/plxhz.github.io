<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Play with Cookies</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
    height: 100vh;
    overflow: hidden;
}

/* ===== PAGES ===== */
.page {
    display: none;
    width: 100vw;
    height: 100vh;
}

/* ===== HOME ===== */
#home {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: yellow;
    text-align: center;
}

#home h1 {
    font-size: 3rem;
    margin-bottom: 25px;
}

.btn {
    padding: 15px 30px;
    font-size: 1.2rem;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    margin: 10px;
}

.play-btn {
    background: blue;
    color: white;
}

.cmd-btn {
    background: black;
    color: white;
}

/* ===== GAME ===== */
#game {
    background: pink;
    position: relative;
    overflow: hidden;
    touch-action: manipulation;
}

.cookie {
    position: absolute;
    font-size: 40px;
    user-select: none;
    pointer-events: none;
    animation: fall 0.8s ease-out forwards;
}

.huge {
    font-size: 70px;
}

.mega {
    font-size: 110px;
}

@keyframes fall {
    from {
        transform: translateY(-100px);
    }
    to {
        transform: translateY(0);
    }
}

.milk {
    position: absolute;
    font-size: 120px;
    left: 50%;
    top: 40%;
    transform: translate(-50%, -50%);
}

/* ===== COMMANDS ===== */
#commands {
    background: #f0f0f0;
    padding: 40px;
}

#commands h2 {
    margin-bottom: 20px;
}

#commands ul {
    font-size: 1.2rem;
    line-height: 2rem;
}

.back-btn {
    margin-top: 30px;
    background: blue;
    color: white;
}
</style>
</head>
<body>

<!-- HOME -->
<div id="home" class="page" style="display:flex;">
    <h1>Play with cookies now!</h1>
    <button class="btn play-btn" onclick="goGame()">Play now!</button>
    <button class="btn cmd-btn" onclick="goCommands()">Commands</button>
</div>

<!-- GAME -->
<div id="game" class="page"></div>

<!-- COMMANDS -->
<div id="commands" class="page">
    <h2>Game Commands</h2>
    <ul>
        <li><b>Click / Tap</b> â€“ Spawn a cookie</li>
        <li><b>Ctrl + Click</b> â€“ Double cookie</li>
        <li><b>Alt + Click</b> â€“ Huge cookie</li>
        <li><b>Alt + Click x3</b> â€“ Mega huge cookie</li>
        <li><b>Tap with 2 fingers (mobile)</b> â€“ Huge cookie</li>
        <li><b>Tap 3 times fast (mobile)</b> â€“ Mega huge cookie</li>
        <li><b>Space</b> â€“ Cookie</li>
        <li><b>Tab</b> â€“ Milk appears, cookies fly away, restart</li>
    </ul>
    <button class="btn back-btn" onclick="goHome()">Back</button>
</div>

<script>
let game = document.getElementById("game");
let stackHeight = 0;
let altClicks = 0;
let lastTap = 0;
let tapCount = 0;

function showPage(id) {
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    document.getElementById(id).style.display = "block";
}

function goGame() { showPage("game"); }
function goHome() { showPage("home"); }
function goCommands() { showPage("commands"); }

/* ===== SPAWN COOKIE ===== */
function spawnCookie(size = "normal", double = false) {
    let cookie = document.createElement("div");
    cookie.classList.add("cookie");
    cookie.innerHTML = double ? "ðŸªðŸª" : "ðŸª";

    if (size === "huge") cookie.classList.add("huge");
    if (size === "mega") cookie.classList.add("mega");

    let x = Math.random() * (window.innerWidth - 80);
    let y = window.innerHeight - 60 - stackHeight;

    cookie.style.left = x + "px";
    cookie.style.top = y + "px";

    stackHeight += 45;
    game.appendChild(cookie);
}

/* ===== MOUSE CLICK ===== */
game.addEventListener("click", (e) => {
    let size = "normal";
    let double = false;

    if (e.ctrlKey) double = true;

    if (e.altKey) {
        altClicks++;
        size = altClicks >= 3 ? "mega" : "huge";
        if (altClicks >= 3) altClicks = 0;
    }

    spawnCookie(size, double);
});

/* ===== MOBILE TOUCH ===== */
game.addEventListener("touchstart", (e) => {
    let now = Date.now();
    if (now - lastTap < 300) {
        tapCount++;
    } else {
        tapCount = 1;
    }
    lastTap = now;

    if (e.touches.length === 2) {
        spawnCookie("huge");
    } else if (tapCount >= 3) {
        spawnCookie("mega");
        tapCount = 0;
    } else {
        spawnCookie();
    }
});

/* ===== KEYBOARD ===== */
document.addEventListener("keydown", (e) => {
    if (e.code === "Space") {
        spawnCookie();
    }

    if (e.code === "Tab") {
        e.preventDefault();
        let milk = document.createElement("div");
        milk.classList.add("milk");
        milk.innerHTML = "ðŸ¥›";
        game.appendChild(milk);

        document.querySelectorAll(".cookie").forEach(c => {
            c.style.transform = `translate(${Math.random()*800 - 400}px, -800px)`;
        });

        setTimeout(() => {
            game.innerHTML = "";
            stackHeight = 0;
        }, 1500);
    }
});
</script>

</body>
</html>

